# inherit package details from kernel package
source "$SCRIPTDIR/pkg/$LINUXPKG/build"

prepare() {
	return
}

build() {
	local INPUT="$1"
	local OUTPUT="$2"

	local CFGFILE="$SCRIPTDIR/cfg/$CFG/linux.config"
	local LINUX_CPU=$(head -1 "$CFGFILE" | cut -b 3-)

	make -C "$INPUT" O="$OUTPUT" ARCH="$LINUX_CPU" mrproper
	make -C "$INPUT" O="$OUTPUT" ARCH="$LINUX_CPU" headers_check
}

deploy() {
	local INPUT="$1"
	local OUTPUT="$2"

	local CFGFILE="$SCRIPTDIR/cfg/$CFG/linux.config"
	local LINUX_CPU=$(head -1 "$CFGFILE" | cut -b 3-)

	export KBUILD_OUTPUT="$OUTPUT"
	make -C "$INPUT" O="$OUTPUT" ARCH="$LINUX_CPU" INSTALL_HDR_PATH="$TCDIR/$TARGET" headers_install
}
