VERSION="R_2_2_5"
SRCDIR="libexpat-${VERSION}/expat"
TARBALL="${VERSION}.tar.gz"
URL="https://github.com/libexpat/libexpat/archive"
SHA256SUM="b3781742738611eaa737543ee94264dd511c52a3ba7e53111f7d705f6bff65a8"
DEPENDS="libbsd"

prepare() {
	autoreconf --force --install --symlink
}

build() {
	$1/configure --prefix="" --host="$TARGET" --disable-static \
		     --without-xmlwf --with-libbsd

	make -j $NUMJOBS
}

deploy() {
	local SOURCE="$1"
	local DEPLOY="$2"

	make DESTDIR="$DEPLOY" install-strip

	cp "$SCRIPTDIR/pkg/$PKGNAME/rootfs_files.txt" "$DEPLOY"
}

check_update() {
	local version=$(echo "$VERSION" | sed 's/R_//g' | sed 's/_/./g')

	curl --silent -L "https://github.com/libexpat/libexpat/releases" | \
	    grep -o "expat-[0-9.]*tar.bz2" | \
	    sed 's/expat-//g' | sed 's/.tar.bz2//g' | \
	    verson_find_greatest "$version"
}