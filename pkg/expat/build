VERSION="2.2.8"
SRCDIR="expat-${VERSION}"
TARBALL="${SRCDIR}.tar.xz"
URL="https://github.com/libexpat/libexpat/releases/download/R_2_2_8"
SHA256SUM="61caa81a49d858afb2031c7b1a25c97174e7f2009aa1ec4e1ffad2316b91779b"
DEPENDS="libbsd-dev toolchain"
SUBPKG="expat expat-dev"

prepare() {
	return
}

build() {
	run_configure "$1" --without-xmlwf --with-libbsd
	make -j $NUMJOBS
}

deploy() {
	make DESTDIR="$PKGDEPLOYDIR" install
	cp $SCRIPTDIR/pkg/$PKGNAME/*.{files,desc} "$PKGDEPLOYDIR"
}

check_update() {
	local version=$(echo "$VERSION" | sed 's/R_//g' | sed 's/_/./g')

	curl --silent -L "https://github.com/libexpat/libexpat/releases" | \
	    grep -o "expat-[0-9.]*tar.bz2" | \
	    sed 's/expat-//g' | sed 's/.tar.bz2//g' | \
	    verson_find_greatest "$version"
}
