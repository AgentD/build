VERSION="1.20171029"
SRCDIR="firmware-${VERSION}"
TARBALL="${VERSION}.tar.gz"
URL="https://github.com/raspberrypi/firmware/archive"
SHA256SUM="46ce28c8d87ef22bdcc57ac1836ca3f04d1ec6f46580ff5a30bf76b3c0822117"
DEPENDS=""

prepare() {
	return
}

build() {
	return
}

deploy() {
	local SOURCE="$1"
	local DEPLOY="$2"
	local DEVDEPLOY="$3"

	cp -r "$SOURCE/hardfp/opt" "$DEPLOY/"

	mkdir -p "$DEVDEPLOY/opt/vc"
	mv "$DEPLOY/opt/vc/include" "$DEVDEPLOY"

	cp -r "$DEPLOY/opt/vc/lib" "$DEVDEPLOY/opt/vc"
	rm ${DEPLOY}/opt/vc/lib/*.a
	rm -r "${DEPLOY}/opt/vc/lib/pkgconfig"
	rm -r "${DEPLOY}/opt/vc/src"

	strip_files ${DEPLOY}/opt/vc/{bin,sbin}/*
	strip_files ${DEPLOY}/opt/vc/lib/*.so
	strip_files ${DEPLOY}/opt/vc/lib/plugins/*.so
}

check_update() {
	curl --silent -L https://github.com/raspberrypi/firmware/releases | \
	     grep -o "[0-9.]\+tar.gz" | sed 's/.tar.gz//g' | \
	     verson_find_greatest "$VERSION"
}