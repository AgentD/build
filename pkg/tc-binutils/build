VERSION="2.31.1"
SRCDIR="binutils-$VERSION"
TARBALL="binutils-$VERSION.tar.xz"
URL="http://ftp.gnu.org/gnu/binutils"
SHA256SUM="5d20086ecf5752cc7d9134246e9588fa201740d540f7eb84d795b1f7a93bca86"
DEPENDS=""

prepare() {
	apply_patches
}

build() {
	local extra="$BINUTILS_EXTRACFG"

	$1/configure --prefix="$TCDIR" --target="$TARGET" --disable-nls \
		     --with-sysroot="$TCDIR/$TARGET" --disable-multilib \
		     --enable-shared --enable-plugins --enable-relro \
		     --with-pic --enable-deterministic-archives \
		     --with-lib-path="$TCDIR/$TARGET/lib" $extra

	make configure-host
	make -j $NUMJOBS
}

deploy() {
	make install

	touch "$2/$PKGNAME.files"
	cat > "$2/$PKGNAME.desc" <<_EOF
name $PKGNAME
_EOF
}

check_update() {
	curl --silent -L "$URL" | grep -o ">binutils-[0-9.]*tar.xz<" | \
	    sed 's/>binutils-//g' | sed 's/.tar.xz<//g' | \
	    verson_find_greatest "$VERSION"
}
