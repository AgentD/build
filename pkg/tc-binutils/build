VERSION="2.30"
SRCDIR="binutils-$VERSION"
TARBALL="binutils-$VERSION.tar.xz"
URL="http://ftp.gnu.org/gnu/binutils"
SHA256SUM="6e46b8aeae2f727a36f0bd9505e405768a72218f1796f0d09757d45209871ae6"
DEPENDS=""

prepare() {
	return
}

build() {
	local extra=""

	$1/configure --prefix="$TCDIR" --target="$TARGET" --disable-nls \
		     --with-sysroot="$TCDIR/$TARGET" --disable-multilib \
		     --enable-shared --enable-plugins --enable-relro \
		     --with-pic --enable-deterministic-archives \
		     --with-lib-path="$TCDIR/$TARGET/lib" $extra

	make configure-host
	make -j $NUMJOBS
}

deploy() {
	make install
}

check_update() {
	curl --silent -L "$URL" | grep -o ">binutils-[0-9.]*tar.xz<" | \
	    sed 's/>binutils-//g' | sed 's/.tar.xz<//g' | \
	    verson_find_greatest "$VERSION"
}
