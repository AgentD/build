# inherit functions from generic kernel package
source "$SCRIPTDIR/pkg/linux-lts/build"

VERSION="1.20190620-1"
SRCDIR="linux-raspberrypi-kernel_${VERSION}"
TARBALL="raspberrypi-kernel_${VERSION}.tar.gz"
URL="https://github.com/raspberrypi/linux/archive"
SHA256SUM="0c41af0a1ad254f5a2e5a2c5ac5e035cfe63518653d5ed9ad6b510c7ed978a8a"
DEPENDS="initrd"
SUBPKG="linux linux-modules"

check_update() {
	local version=$(echo $VERSION | sed 's/-/./g')

	curl --silent -L "https://github.com/raspberrypi/linux/releases" | \
	    grep -o "raspberrypi-kernel_[0-9.]*-[0-9]" | \
	    sed 's/raspberrypi-kernel_//g' | sed 's/-/./g' | \
	    verson_find_greatest "$version"
}
