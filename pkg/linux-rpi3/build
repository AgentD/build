# inherit functions from generic kernel package
source "$SCRIPTDIR/pkg/linux/build"

VERSION="1.20180919-1"
SRCDIR="linux-raspberrypi-kernel_${VERSION}"
TARBALL="raspberrypi-kernel_${VERSION}.tar.gz"
URL="https://github.com/raspberrypi/linux/archive"
SHA256SUM="b58a7a786b94957674ce3f64307ea7e7883ae2d1d871ea6ed5a5ce1b6846bdf4"
DEPENDS="initrd"

check_update() {
	local version=$(echo $VERSION | sed 's/-/./g')

	curl --silent -L "https://github.com/raspberrypi/linux/releases" | \
	    grep -o "raspberrypi-kernel_[0-9.]*-[0-9]" | \
	    sed 's/raspberrypi-kernel_//g' | sed 's/-/./g' | \
	    verson_find_greatest "$version"
}
