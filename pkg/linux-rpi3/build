# inherit functions from generic kernel package
source "$SCRIPTDIR/pkg/linux/build"

VERSION="1.20180924-1"
SRCDIR="linux-raspberrypi-kernel_${VERSION}"
TARBALL="raspberrypi-kernel_${VERSION}.tar.gz"
URL="https://github.com/raspberrypi/linux/archive"
SHA256SUM="ee6c769c97d794f11eb098fab4b1c4b3b3af0e406aa0bbc3bf202234eac95347"
DEPENDS="initrd"

check_update() {
	local version=$(echo $VERSION | sed 's/-/./g')

	curl --silent -L "https://github.com/raspberrypi/linux/releases" | \
	    grep -o "raspberrypi-kernel_[0-9.]*-[0-9]" | \
	    sed 's/raspberrypi-kernel_//g' | sed 's/-/./g' | \
	    verson_find_greatest "$version"
}
